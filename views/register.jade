extends layout

block content


  div(class="container login front", style="margin-top: 8%;text-align: center;position: relative;")
     a(href="/search" class=labentered)
        img(src="/images/yoke4.png", alt="The Yoke",  title="Yoke", class="yokelogo")
       div
        if !labentered && !regsuccess && !confirmReset
            h1 #{i18n.__("register.title")}
            p 
                span!= i18n.__("register.desc1")
                span(class="labColor")= i18n.__("register.title2")
                span!= i18n.__("register.subtitle")
            div(id="ctl00_Div2" class="frontdiv")
                if message
                    div(class="alert alert-danger")!= message
                div(class="alert alert-danger", id="messagejs1", style="display:none")
                form(action="/register" method="post" id="regform1")
                    div(style="margin-bottom: 20px;")
                        div(class="textentry")
                            input(name="regfirstname" type="text" id="regfirstname" class="form-control" placeholder=i18n.__("register.form.name"))
                        div(class="textentry")
                            input(name="reglastname" type="text" id="lastname" class="form-control" placeholder=i18n.__("register.form.lastname"))
                    div(style="margin-bottom: 20px;")
                        div(class="textentry")
                            input(name="regemail" type="text" id="regemail" class="form-control" placeholder=i18n.__("register.form.email"))
                        div(class="textentry")
                            input(name="regtel" type="text" id="tel" class="form-control" placeholder=i18n.__("register.form.tel"))
                    div(class="buttons", id="regbutton1")
                        button.btn.btn-success.btn-lg.btn-block(type='button',style='width:85%') #{i18n.__("register.form.button1")}
                        img(src="/images/add.png", alt="The Lab", title="Lab", style="border-width:0px; width: 50px; height:57px; margin-top: -45px; float: right;")
                script.
                    $('#regbutton1').click(function() {
                        console.log("regfirstname: " + $('#regfirstname').val());
                        console.log("reglastname: " + $('#reglastname').val());
                        console.log("regemail: " + $('#regemail').val());
                        console.log("regtel: " + $('#regtel').val());
                        if($('#regfirstname').val() != "" && $('#reglastname').val() != "" && $('#regemail').val() != "" && $('#regtel').val() != "" ){
                            console.log("go on!");
                            $('#regform1').submit();
                        } else if($('#regfirstname').val() == ""){
                            console.log("stop!");
                            $('#messagejs1').html("#{i18n.__("index.register.message7")}");
                            $('#messagejs1').show();
                            return false;
                        } else if($('#reglastname').val() == ""){
                            console.log("stop!");
                            $('#messagejs1').html("#{i18n.__("index.register.message8")}");
                            $('#messagejs1').show();
                            return false;
                        } else if($('#regemail').val() == ""){
                            console.log("stop!");
                            $('#messagejs1').html("#{i18n.__("index.register.message9")}");
                            $('#messagejs1').show();
                            return false;
                        } else if($('#regtel').val() == ""){
                            console.log("stop!");
                            $('#messagejs1').html("#{i18n.__("index.register.message10")}");
                            $('#messagejs1').show();
                            return false;
                        } 
                      }); 

        if labentered
            h1= i18n.__("register.form2.desc")
            p= i18n.__("register.form2.subdesc")
            div(id="ctl00_Div2" class="frontdiv")
                if message
                    div(class="alert alert-danger")!= message
                div(class="alert alert-danger", id="messagejs", style="display:none")
                form(action="/register" method="post" id="regform2")
                    div(style="margin-bottom: 20px;")
                        div(class="textentry")
                            input(name="reguser" type="text" id="reguser" class="form-control" placeholder=i18n.__("register.form2.username") style="border-color:#8a6d3b")
                        div(class="textentry")
                            input(name="regpass" type="password" id="regpass" class="form-control" placeholder=i18n.__("register.form2.pwd") style="border-color:#8a6d3b")
                        div(class="textentry")
                            input(name="regverpass" type="password" id="regverpass" class="form-control" placeholder=i18n.__("register.form2.verifypwd") style="border-color:#8a6d3b")

                    div(style="margin-bottom: 20px;")
                        div(class="textentry")
                            select(name="reglab" type="text" id="reglab" class="form-control" style="border-color:#3d9dcb" placeholder=i18n.__("register.form2.lab"))
                             if(labs != undefined)
                                 - var ob = labs
                                 - for(var prop in ob)
                                   - var lab = ob[prop].labname
                                   option(value=lab) #{lab}
                            div(style="top: -25px; position: relative; float: right; margin-right: 10px;")
                                div(class="arrow-up")
                                div(class="arrow-down")
                        input(name="regfirstname" type="hidden" id="regfirstname" value=firstname)
                        input(name="reglastname" type="hidden" id="reglastname" value=lastname)
                        input(name="regemail" type="hidden" id="regemail" value=email)
                        input(name="regtel" type="hidden" id="regtel" value=tel)
                    div(class="buttons", id="regbutton2")
                        //input(type="submit" class="button" value="Register")
                        button.btn.btn-success.btn-lg.btn-block(type='button',style='width:85%')= i18n.__("register.form2.button2")
                        img(src="/images/add.png", alt="The Lab", title="Lab", style="border-width:0px; width: 50px; margin-top: -45px; float: right;")
                script.
                    $('#regbutton2').click(function() {
                        console.log("regverpass: " + $('#regverpass').val());
                        console.log("regpass: " + $('#regpass').val());
                        if($('#reguser').val() != "" && $('#regverpass').val() != "" && $('#regverpass').val() == $('#regpass').val()){
                            console.log("go on!");
                            $('#regform2').submit();
                        } else if($('#regverpass').val() == ""){
                            console.log("stop!");
                            $('#messagejs').html("#{i18n.__("index.register.message6")}");
                            $('#messagejs').show();
                            return false;
                        } else if($('#regpass').val() == "" || $('#regverpass').val() == "" || $('#regverpass').val() != $('#regpass').val()){
                            console.log("stop!");
                            $('#messagejs').html("#{i18n.__("index.register.message5")}");
                            $('#messagejs').show();
                            return false;
                        } 
                      });
            
        if regsuccess && !labentered
                div(id="ctl00_Div2")
                    span(style="text-align: center")
                        h3= i18n.__("register.thanku")
                            span(style="color: #3d9dcb;")=" " + regsuccess + "!"
                        h4!= i18n.__("register.thanku.desc1")
        if confirmReset
                div(id="ctl00_Div2")
                    span(style="text-align: center")
                        h3= i18n.__("register.thanku2")
                            span(style="color: #3d9dcb;")=" " + regsuccess + "!"
                        h4!= i18n.__("register.thanku2.desc1")        
    script.
      $(document).ready(function(){
        $('#tel').mask("(999) 999-9999");
      }); 
